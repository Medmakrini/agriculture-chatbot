from flask import Flask, request , json
from Chat_Reply_EN import Predict_Plant_En , ask_agriculture_expert_En ,recognize_audio_En
from Chat_Reply_FR import Predire_Plante_Fr , demander_expert_agriculture_Fr ,reconnaitre_audio_Fr
from Chat_Reply_AR import Predire_Plante_AR , demander_expert_agriculture_AR ,reconnaitre_audio_AR
import base64
from os import path
import ffmpeg

def decode_base64_string(encoded_string):
        audio_path = path.join(path.dirname(path.realpath(__file__)) ,'last.3gp' )
        audio_file = open(audio_path, "wb")
        decode_string = base64.b64decode(encoded_string)
        audio_file.write(decode_string)
        wav_path = path.join(path.dirname(path.realpath(__file__)) ,'last.wav' )
        #cmd ='ffmpeg -i '+ 'last.3gp' + ' -f wav -acodec pcm_s16le -ar 22050 -ac 1 ' + wav_path
        #os.system(cmd)
        ffmpeg.input(audio_path).output(wav_path, format='wav').run()
        return wav_path


# au="  AAAAGGZ0eXAzZ3A0AAAAAGlzb20zZ3A0AAAEN21vb3YAAABsbXZoZAAAAADghTBu4IUwbgAAJxAAAFOYAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAB2bWV0YQAAACFoZGxyAAAAAAAAAABtZHRhAAAAAAAAAAAAAAAAAAAAACtrZXlzAAAAAAAAAAEAAAAbbWR0YWNvbS5hbmRyb2lkLnZlcnNpb24AAAAiaWxzdAAAABoAAAABAAAAEmRhdGEAAAABAAAAADExAAADTXRyYWsAAABcdGtoZAAAAAfghTBu4IUwbgAAAAEAAAAAAABTmAAAAAAAAAAAAAAAAAEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAultZGlhAAAAIG1kaGQAAAAA4IUwbuCFMG4AAB9AAABC4AAAAAAAAAAsaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlAAAAApVtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAllzdGJsAAAARXN0c2QAAAAAAAAAAQAAADVzYW1yAAAAAAAAAAEAAAAAAAAAAAABABAAAAAAH0AAAAAAABFkYW1yICAgAACD/wABAAAAGHN0dHMAAAAAAAAAAQAAAGsAAACgAAABwHN0c3oAAAAAAAAAAAAAAGsAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAABxzdHNjAAAAAAAAAAEAAAABAAAAawAAAAEAAAAYY282NAAAAAAAAAABAAAAAAAADKAAAAhBZnJlZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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"
# decode_base64_string(au)